{"filter":false,"title":"map.js","tooltip":"/OnePage/js/map.js","undoManager":{"mark":23,"position":23,"stack":[[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["f"],"id":1},{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["n"]}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"remove","lines":["n"],"id":2}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["u"],"id":3},{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["n"]},{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["c"]},{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["i"]},{"start":{"row":0,"column":5},"end":{"row":0,"column":6},"action":"insert","lines":["o"]}],[{"start":{"row":0,"column":5},"end":{"row":0,"column":6},"action":"remove","lines":["o"],"id":4},{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"remove","lines":["i"]},{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"remove","lines":["c"]},{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"remove","lines":["n"]},{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"remove","lines":["u"]},{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"remove","lines":["f"]}],[{"start":{"row":0,"column":0},"end":{"row":120,"column":1},"action":"insert","lines":["","/* global google */","","// Class that wraps Google Map APIs required by this project","function GMapsAPI() {","    var self = this;","    ","    // Create a Google Map","    self.map = new google.maps.Map(document.getElementById('map'), {","        mapTypeId: google.maps.MapTypeId.ROADMAP,","        zoom: 10","    });","    ","    // GeoCoder API","    var geocoder = new google.maps.Geocoder;","    ","    // Places API","    var places = new google.maps.places.PlacesService(self.map);","    ","    // Create a marker on the map","    self.createMarker = function(params) {","        ","        // Options to create a marker","        var options = {","            map: self.map,","            position: params.location,","            title: params.name,","            animation: google.maps.Animation.DROP","        };","        ","        if (params.icon) {","            // use place's icon as custom marker icon","            options.icon = { ","                url: params.icon,","                size: new google.maps.Size(71, 71),","                origin: new google.maps.Point(0, 0),","                anchor: new google.maps.Point(17, 34),","                scaledSize: new google.maps.Size(25, 25)","            };","        };","        ","        return new google.maps.Marker(options);","    };","    ","    // Fit the map to the bound of the given list of locations","    self.fitMap = function(currentLoc, locations) {","        ","        var bounds = new google.maps.LatLngBounds();","        bounds.extend(new google.maps.LatLng(currentLoc.lat, currentLoc.lng));","","        for (var i = 0; i < locations.length; i++) {","            var loc = locations[i];","            bounds.extend(new google.maps.LatLng(loc.lat, loc.lon));","        }","","        self.map.fitBounds(bounds);","        self.map.setCenter(bounds.getCenter());","        if (locations.length === 0) {","            self.map.setZoom(10);","        }","        window.mapBounds = bounds;","    };","    ","    // Search Geocoding service","    self.geoLookup = function(request, callback) {","        ","        geocoder.geocode(request, function(results, status) {","            if (status === 'OK') {","                if (!results[0]) {","                    callback('Geocoder failed: no results found');","                } else {","                    callback(null, results[0]);","                }","            } else {","                callback('Geocoder failed due to: ' + status);","            }","        });","    };","","    // Reverse Geocoding by Location","    self.reverseLocation = function(latLng, callback) {","        self.geoLookup({location: latLng}, callback);","    };","    ","    // Search nearby places using PlacesService textSearch","    self.searchPlaces = function(query, latLng, radius, callback) {","        ","        var request = {","            keyword: query,","            location: new google.maps.LatLng(latLng.lat, latLng.lng),","            radius: radius","        };","        ","        // Use TextSearch service for searching nearby places","        places.nearbySearch(request, function (results, status) {","            if (status === google.maps.places.PlacesServiceStatus.OK) {","                callback(null, results);","            } else {","                callback('PlacesService failed due to: ' + status);","            }","        });   ","    };","}","","// Helper functions","","function utilGetCity(geoResult) {","    ","    var components = geoResult.address_components;","    for (var i = 0; i < components.length; i++) {","        ","        var comp = components[i];","        var types = comp.types;","        for (var j = 0; j < types.length; j++) {","            if (types[j] === 'locality') {","                return comp.long_name;","            }","        }","    }","    return geoResult.formatted_address;","}"],"id":5}],[{"start":{"row":0,"column":0},"end":{"row":120,"column":1},"action":"remove","lines":["","/* global google */","","// Class that wraps Google Map APIs required by this project","function GMapsAPI() {","    var self = this;","    ","    // Create a Google Map","    self.map = new google.maps.Map(document.getElementById('map'), {","        mapTypeId: google.maps.MapTypeId.ROADMAP,","        zoom: 10","    });","    ","    // GeoCoder API","    var geocoder = new google.maps.Geocoder;","    ","    // Places API","    var places = new google.maps.places.PlacesService(self.map);","    ","    // Create a marker on the map","    self.createMarker = function(params) {","        ","        // Options to create a marker","        var options = {","            map: self.map,","            position: params.location,","            title: params.name,","            animation: google.maps.Animation.DROP","        };","        ","        if (params.icon) {","            // use place's icon as custom marker icon","            options.icon = { ","                url: params.icon,","                size: new google.maps.Size(71, 71),","                origin: new google.maps.Point(0, 0),","                anchor: new google.maps.Point(17, 34),","                scaledSize: new google.maps.Size(25, 25)","            };","        };","        ","        return new google.maps.Marker(options);","    };","    ","    // Fit the map to the bound of the given list of locations","    self.fitMap = function(currentLoc, locations) {","        ","        var bounds = new google.maps.LatLngBounds();","        bounds.extend(new google.maps.LatLng(currentLoc.lat, currentLoc.lng));","","        for (var i = 0; i < locations.length; i++) {","            var loc = locations[i];","            bounds.extend(new google.maps.LatLng(loc.lat, loc.lon));","        }","","        self.map.fitBounds(bounds);","        self.map.setCenter(bounds.getCenter());","        if (locations.length === 0) {","            self.map.setZoom(10);","        }","        window.mapBounds = bounds;","    };","    ","    // Search Geocoding service","    self.geoLookup = function(request, callback) {","        ","        geocoder.geocode(request, function(results, status) {","            if (status === 'OK') {","                if (!results[0]) {","                    callback('Geocoder failed: no results found');","                } else {","                    callback(null, results[0]);","                }","            } else {","                callback('Geocoder failed due to: ' + status);","            }","        });","    };","","    // Reverse Geocoding by Location","    self.reverseLocation = function(latLng, callback) {","        self.geoLookup({location: latLng}, callback);","    };","    ","    // Search nearby places using PlacesService textSearch","    self.searchPlaces = function(query, latLng, radius, callback) {","        ","        var request = {","            keyword: query,","            location: new google.maps.LatLng(latLng.lat, latLng.lng),","            radius: radius","        };","        ","        // Use TextSearch service for searching nearby places","        places.nearbySearch(request, function (results, status) {","            if (status === google.maps.places.PlacesServiceStatus.OK) {","                callback(null, results);","            } else {","                callback('PlacesService failed due to: ' + status);","            }","        });   ","    };","}","","// Helper functions","","function utilGetCity(geoResult) {","    ","    var components = geoResult.address_components;","    for (var i = 0; i < components.length; i++) {","        ","        var comp = components[i];","        var types = comp.types;","        for (var j = 0; j < types.length; j++) {","            if (types[j] === 'locality') {","                return comp.long_name;","            }","        }","    }","    return geoResult.formatted_address;","}"],"id":6}],[{"start":{"row":0,"column":0},"end":{"row":6,"column":7},"action":"insert","lines":["fetch('https://api.foursquare.com/v2/venues/explore?client_id=CLIENT_ID&client_secret=CLIENT_SECRET&v=20180323&limit=1&ll=40.7243,-74.0018&query=coffee')","    .then(function() {","        // Code for handling API response","    })","    .catch(function() {","        // Code for handling errors","    });"],"id":7}],[{"start":{"row":0,"column":70},"end":{"row":0,"column":71},"action":"remove","lines":["D"],"id":8},{"start":{"row":0,"column":69},"end":{"row":0,"column":70},"action":"remove","lines":["I"]},{"start":{"row":0,"column":68},"end":{"row":0,"column":69},"action":"remove","lines":["_"]},{"start":{"row":0,"column":67},"end":{"row":0,"column":68},"action":"remove","lines":["T"]},{"start":{"row":0,"column":66},"end":{"row":0,"column":67},"action":"remove","lines":["N"]},{"start":{"row":0,"column":65},"end":{"row":0,"column":66},"action":"remove","lines":["E"]},{"start":{"row":0,"column":64},"end":{"row":0,"column":65},"action":"remove","lines":["I"]},{"start":{"row":0,"column":63},"end":{"row":0,"column":64},"action":"remove","lines":["L"]}],[{"start":{"row":0,"column":62},"end":{"row":0,"column":63},"action":"remove","lines":["C"],"id":9}],[{"start":{"row":0,"column":62},"end":{"row":0,"column":110},"action":"insert","lines":["QQSH4RIN1DZSNSXIKSOKE4S5E2DRTHGPGJMDG3OTLIAMFICI"],"id":10}],[{"start":{"row":0,"column":137},"end":{"row":0,"column":138},"action":"remove","lines":["T"],"id":11},{"start":{"row":0,"column":136},"end":{"row":0,"column":137},"action":"remove","lines":["E"]},{"start":{"row":0,"column":135},"end":{"row":0,"column":136},"action":"remove","lines":["R"]},{"start":{"row":0,"column":134},"end":{"row":0,"column":135},"action":"remove","lines":["C"]},{"start":{"row":0,"column":133},"end":{"row":0,"column":134},"action":"remove","lines":["E"]},{"start":{"row":0,"column":132},"end":{"row":0,"column":133},"action":"remove","lines":["S"]},{"start":{"row":0,"column":131},"end":{"row":0,"column":132},"action":"remove","lines":["_"]},{"start":{"row":0,"column":130},"end":{"row":0,"column":131},"action":"remove","lines":["T"]},{"start":{"row":0,"column":129},"end":{"row":0,"column":130},"action":"remove","lines":["N"]},{"start":{"row":0,"column":128},"end":{"row":0,"column":129},"action":"remove","lines":["E"]},{"start":{"row":0,"column":127},"end":{"row":0,"column":128},"action":"remove","lines":["I"]},{"start":{"row":0,"column":126},"end":{"row":0,"column":127},"action":"remove","lines":["L"]}],[{"start":{"row":0,"column":125},"end":{"row":0,"column":126},"action":"remove","lines":["C"],"id":12}],[{"start":{"row":0,"column":125},"end":{"row":0,"column":173},"action":"insert","lines":["2EDBDDMUH0A432CCSEUN0LGQRDPGP2WHE23Z2VVEBWP2IP0I"],"id":13}],[{"start":{"row":0,"column":224},"end":{"row":0,"column":225},"action":"remove","lines":["e"],"id":14},{"start":{"row":0,"column":223},"end":{"row":0,"column":224},"action":"remove","lines":["e"]},{"start":{"row":0,"column":222},"end":{"row":0,"column":223},"action":"remove","lines":["f"]},{"start":{"row":0,"column":221},"end":{"row":0,"column":222},"action":"remove","lines":["f"]},{"start":{"row":0,"column":220},"end":{"row":0,"column":221},"action":"remove","lines":["o"]},{"start":{"row":0,"column":219},"end":{"row":0,"column":220},"action":"remove","lines":["c"]}],[{"start":{"row":0,"column":219},"end":{"row":0,"column":220},"action":"insert","lines":["b"],"id":15},{"start":{"row":0,"column":220},"end":{"row":0,"column":221},"action":"insert","lines":["a"]},{"start":{"row":0,"column":221},"end":{"row":0,"column":222},"action":"insert","lines":["r"]}],[{"start":{"row":0,"column":197},"end":{"row":0,"column":198},"action":"remove","lines":["0"],"id":16},{"start":{"row":0,"column":196},"end":{"row":0,"column":197},"action":"remove","lines":["4"]}],[{"start":{"row":0,"column":196},"end":{"row":0,"column":197},"action":"insert","lines":["1"],"id":17},{"start":{"row":0,"column":197},"end":{"row":0,"column":198},"action":"insert","lines":["."]},{"start":{"row":0,"column":198},"end":{"row":0,"column":199},"action":"insert","lines":["3"]},{"start":{"row":0,"column":199},"end":{"row":0,"column":200},"action":"insert","lines":["5"]}],[{"start":{"row":0,"column":204},"end":{"row":0,"column":205},"action":"remove","lines":["3"],"id":18},{"start":{"row":0,"column":203},"end":{"row":0,"column":204},"action":"remove","lines":["4"]},{"start":{"row":0,"column":202},"end":{"row":0,"column":203},"action":"remove","lines":["2"]},{"start":{"row":0,"column":201},"end":{"row":0,"column":202},"action":"remove","lines":["7"]},{"start":{"row":0,"column":200},"end":{"row":0,"column":201},"action":"remove","lines":["."]}],[{"start":{"row":0,"column":207},"end":{"row":0,"column":208},"action":"remove","lines":["1"],"id":19},{"start":{"row":0,"column":206},"end":{"row":0,"column":207},"action":"remove","lines":["0"]},{"start":{"row":0,"column":205},"end":{"row":0,"column":206},"action":"remove","lines":["0"]},{"start":{"row":0,"column":204},"end":{"row":0,"column":205},"action":"remove","lines":["."]},{"start":{"row":0,"column":203},"end":{"row":0,"column":204},"action":"remove","lines":["4"]},{"start":{"row":0,"column":202},"end":{"row":0,"column":203},"action":"remove","lines":["7"]},{"start":{"row":0,"column":201},"end":{"row":0,"column":202},"action":"remove","lines":["-"]}],[{"start":{"row":0,"column":201},"end":{"row":0,"column":202},"action":"insert","lines":["1"],"id":20},{"start":{"row":0,"column":202},"end":{"row":0,"column":203},"action":"insert","lines":["0"]},{"start":{"row":0,"column":203},"end":{"row":0,"column":204},"action":"insert","lines":["3"]},{"start":{"row":0,"column":204},"end":{"row":0,"column":205},"action":"insert","lines":["."]},{"start":{"row":0,"column":205},"end":{"row":0,"column":206},"action":"insert","lines":["8"]},{"start":{"row":0,"column":206},"end":{"row":0,"column":207},"action":"insert","lines":["1"]}],[{"start":{"row":0,"column":207},"end":{"row":0,"column":208},"action":"remove","lines":["8"],"id":21}],[{"start":{"row":0,"column":0},"end":{"row":6,"column":7},"action":"remove","lines":["fetch('https://api.foursquare.com/v2/venues/explore?client_id=QQSH4RIN1DZSNSXIKSOKE4S5E2DRTHGPGJMDG3OTLIAMFICI&client_secret=2EDBDDMUH0A432CCSEUN0LGQRDPGP2WHE23Z2VVEBWP2IP0I&v=20180323&limit=1&ll=1.35,103.81&query=bar')","    .then(function() {","        // Code for handling API response","    })","    .catch(function() {","        // Code for handling errors","    });"],"id":22}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":3},"action":"insert","lines":["// "],"id":23},{"start":{"row":1,"column":0},"end":{"row":1,"column":3},"action":"insert","lines":["// "]},{"start":{"row":2,"column":0},"end":{"row":2,"column":3},"action":"insert","lines":["// "]},{"start":{"row":3,"column":0},"end":{"row":3,"column":3},"action":"insert","lines":["// "]},{"start":{"row":4,"column":0},"end":{"row":4,"column":3},"action":"insert","lines":["// "]},{"start":{"row":5,"column":0},"end":{"row":5,"column":3},"action":"insert","lines":["// "]},{"start":{"row":6,"column":0},"end":{"row":6,"column":3},"action":"insert","lines":["// "]}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":3},"action":"remove","lines":["// "],"id":24},{"start":{"row":1,"column":0},"end":{"row":1,"column":3},"action":"remove","lines":["// "]},{"start":{"row":2,"column":0},"end":{"row":2,"column":3},"action":"remove","lines":["// "]},{"start":{"row":3,"column":0},"end":{"row":3,"column":3},"action":"remove","lines":["// "]},{"start":{"row":4,"column":0},"end":{"row":4,"column":3},"action":"remove","lines":["// "]},{"start":{"row":5,"column":0},"end":{"row":5,"column":3},"action":"remove","lines":["// "]},{"start":{"row":6,"column":0},"end":{"row":6,"column":3},"action":"remove","lines":["// "]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":5,"column":23},"end":{"row":5,"column":23},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":102,"mode":"ace/mode/javascript"}},"timestamp":1563433137115,"hash":"8b22a42c48501027515c30e8de9a3fe4fa037f0b"}